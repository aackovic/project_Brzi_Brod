<!-- Zlatko Golubović 0089/2021 -->
{% extends "layout.html" %}
{% load static %}
{% block title %}
Registracija moderatora
{% endblock %}
{% block titleArea %}
<img src="{% static 'StudAssistLogo-removebg.png' %}" width="200px" class="img-fluid">
<h1 class="main-title">Registracija moderatora</h1>
{% endblock %}
{% block content %}
<div class="row justify-content-center">
    <div class="col-sm-6">
        <form id="form" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <p class="registerForm" style="margin-top: 2px;">Lični podaci</p>
            <div class="form-group">
                {{form.first_name.label}}<br>
                {{form.first_name}}
                <ul>
                    {% for error in form.first_name.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>

                {{form.last_name.label}}<br>
                {{form.last_name}}
                <ul>
                    {% for error in form.last_name.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>

                {{form.email.label}}<br>
                {{form.email}}
                <ul>    
                    {% for error in form.email.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>

                {{form.address.label}}<br>
                {{form.address}}
                <ul>
                    {% for error in form.address.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>

                {{form.birthdate.label}}<br>
                {{form.birthdate}}
                <ul>
                    {% for error in form.birthdate.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>

                {{form.telnum.label}}<br>
                {{form.telnum}}
                <ul>
                    {% for error in form.telnum.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
            <hr>
            <p class="registerForm">Podaci o menzi za koju će biti zadužen</p>
            <div class="form-group">
                {{form.canteen_name.label}}<br>
                {{form.canteen_name}}
                <ul>
                    {% for error in form.canteen_name.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
            <hr>
            <p class="registerForm">Podaci o moderatorskom nalogu</p>
            <div class="form-group">
                {{form.profile_picture.label}}<br>
                {{form.profile_picture}}
                <ul>
                    {% for error in form.profile_picture.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>

                {{form.username.label}}<br>
                {{form.username}}
                <ul>
                    {% for error in form.username.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
                <!--<label class="logintext" for="passwordReg">Lozinka</label>
                <input type="password" class="form-control" id="passwordReg" 
                    pattern="(?=.*\d)(?=.*[\W_])(?=.*[a-z])(?=.*[A-Z]).{8,}" 
                    title="Lozinka treba da ima najmanje 8 karaktera. Barem po jednu cifru, 
                    malo slovo, veliko slovo i specijalni znak." required>-->
                {{form.password1.label}}<br>
                {{form.password1}}
                <ul>
                    {% for error in form.password1.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>

                {{form.password2.label}}<br>
                {{form.password2}}
                <ul>
                    {% for error in form.password2.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
                <ul>
                    {% for error in form.non_field_errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
            <button type="submit" class="btn btn-primary my-2">Registrujte se</button>
        </form>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>

    function delayedAlert(message, type) {
        setTimeout(function () {
            var icon = 'info';
            if (type === 'success') {
                icon = 'success';
            } else if (type === 'error') {
                icon = 'error';
            }

            Swal.fire({
                text: message,
                icon: icon
            });
        }, 200);
    }
    
    {% if messages %}
        {% for message in messages %}
            var messageContent = "{{ message }}";
            var messageType = "{{ message.tags }}";
            delayedAlert(messageContent, messageType);
        {% endfor %}
    {% endif %}
</script>
{% endblock %}